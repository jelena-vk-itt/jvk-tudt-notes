<!DOCTYPE html>
<html lang="en">
    <head>
	<meta name="viewport" content="width=device-width, initial-scale=1.0" />
	<meta charset="UTF-8" />
	<link rel="shortcut icon" type="image/x-icon" href="res/images/logo.png" />
	<link rel="stylesheet" type="text/css" href="res/styles/ooswd.css" />
	<title>OOSWD</title>
    </head>
    <body>
	<header id="tudheader">
	    <img id="leftlogo" src="../common/res/images/tudublin_logo.png" alt="TU Dublin Logo">
	    <div id="tuddepttext">
		<p>School of Computer Science</p>
	    </div>
	    <div id="titlecontainer">
		<p id="title">Classes</p>
	    </div>
	    <img id="rightlogo" src="res/images/logo.png" alt="Logo" />
	</header>

	<div id="content">
	    <nav>
		<ul class="links">
		    <li><a href="index.html">Home</a></li>
		</ul>
		<ul class="commands">
		    <li class="openall">Open all</li>
		    <li class="closeall">Close all</li>
		</ul>

	    </nav>

	    <article>
		<ol class="toc_grp newline">
		    
	            <!--------------------------------------------------------------------->
		    <li id="ARTCLID000091">
			<p>What is a class?</p>
			<article style="display:none">
                            <h2>What is a class?</h2>
			    <p>In a programming language, a class:
				<ul>
				    <li>is a specific <strong>blueprint</strong> for objects</li>
				    <li>represents the <strong>type</strong> of any object based on it as a blueprint</li>
				    <li>bundles <strong>data and associated behaviour</strong> together</li>
				</ul>
			    </p>
			    <p><u>In Python:</u></p>
			    <ul>
				<li>everything is an object and any object has a class underlying it</li>
				<li>'type' and 'class' are interchangeable (when we call <span class="fw">type(x)</span>, it returns the class of x)</li>
				<li>some classes are built in (e.g. <span class="fw">int</span> or <span class="fw">list</span>), but new ones can be defined (this is what we are doing in this lesson)</li>
				<li>even classes are objects and have a class, <span class="fw">type</span> (they are in fact 'meta-objects' as they describe other objects)</li>
			    </ul>
			    <details class="ice"><summary></summary>
				<p>Try the following expressions in the Python command line, or wrapped in a <span class="fw">print()</span> call in PyCharm. </p>
				<pre>
type(4)
type(int)

type("abcd")
type(str)

type([2, 3, 4])
type(list)</pre>
			    </details>
			    <h3>Why define new classes?</h3>
			    <ul>
				<li>We use programming to <strong>solve real-world problems</strong>. Thus, the better programming language constructs match real world 'constructs', the easier it will be to model the real world in a program and the easier it will be to understand a program once it is written.</li>
				<li>When observing the real world, we tend to think about <strong>it in terms of 'things'</strong> first and then actions performed by and on those things<a href="#footnote-1"><sup>1</sup></a>. This means that a construct that represents a 'thing' should be a good idea and that is exactly what classes are.</li>
				<li>A class, however, does not represent any one thing. Rather, it <strong>represents a category</strong> (i.e. class!) of things.</li>
				<li>A <strong>class definition</strong> contains information about a category of things:
				    <ul>
					<li>the different attributes it has</li>
					<li>the different actions that can be performed on it</li>
					<li>relationships with other categories</li>
				    </ul>
				</li>
				<li>The picture below is a UML class diagram. You do not need to understand all the details at this stage, but each box in the diagram shows a class. The top section of each box contains the class name, the next section the class attributes/properties and the bottom section the class methods (these are essentially functions attached to any object of this class and represent the actions that can be performed on this category of thing).
				    <figure>
					<figcaption>Example class diagram in UML</figcaption>
					<img class="w-six" src="res/images/class_dgrm_example.png">
				    </figure>
				</li>
				<li>Working with classes
				    <ul>
					<li>makes it easier to think about requirements, as concepts are separated</li>
					<li>makes design and implementation more intuitive</li>
					<li>allows for easier division of labour in team projects</li>
					<li>brings reuse into the domain of 'things' in the same way that functions allow the reuse of 'actions'</li>
				    </ul>
				</li>
			    </ul>
			    <p style="font-size:small" id="footnote-1">[1] Of course, there might not be anything that fundamentally precludes the view of the world where action is primary and things only secondary to it, but this does not seem to be the way most people think.</p>			    
			</article>
		    </li>
		    
		    <!--------------------------------------------------------------------->            
		    <li id="ARTCLID000092">
			<p>Defining and using a class in Python</p>
			<article style="display:none">
			    <h2>Defining and using a class in Python</h2>

			    <h3>Class definition syntax</h3>
			    <p>We use the class construct to define a new object type.</p>
			    <p>In Python a class is defined using the following syntax:</p>

			    <figure id="py-class-simple">
				<figcaption>A simple class defined in Python</figcaption><pre class="code-listing">
class ThreeFour:

    def __init__(self):
        self.x = 3
        self.y = 4

    def print(self):
        print("x is: ", self.x)
        print("y is: ", self.y)</pre>
				<table class="legend">    
				    <tr><td><span class="fw">class</span></td><td>The keyword</td></tr>
				    <tr><td><span class="fw">ThreeFour</span></td><td>A user-defined name for the class, which must follow <a href="https://docs.python.org/3/reference/lexical_analysis.html#names-identifiers-and-keywords">Python naming rules</a>; is in CamelCase by convention</td></tr>
				    <tr><td>the colon (<span class="fw">:</span>)</td><td>A mandatory part of the syntax</td></tr>
				    <tr><td>everything below the first line</td><td>The body of the class, in which all top-level instructions (in the example, the two function definitions) must be indented equally</td></tr>
				    <tr><td><span class="fw">__init__()</span></td><td>The class constructor, always called <span class="fw">__init__</span>. This method is called when an object of this class is created.</td></tr>
				    <tr><td><span class="fw">print()</span></td><td>A member function (i.e. a method)</td></tr>
				    <tr><td><span class="fw">self</span></td><td>The first parameter of any member function, including the constructor, represents the object of type <span class="fw">ThreeFour</span> on which the method was called at runtime. The name <span class="fw">self</span> is always used, by convention, for this parameter.</td></tr>
				    <tr><td><span class="fw">self.x</span><br/><span class="fw">self.y</span></td><td>Member variables are defined and initialised on the object in the constructor. If defined in the constructor, they can be accessed from other member methods of the class.</td></tr>
				</table>
				<hr><hr>
			    </figure>

			    <h3>Using a class</h3>
			    <ul>
				<li>Once a class is defined, we can create objects of that class. This is called <strong>instanciation</strong>.</li>
				<li>To instanciate a class, we use the class name as a function, passing any arguments required by the constructor, except for <span class="fw">self</span> (<span class="fw">threeFourObj = ThreeFour()</span> in the picture).</li>
				<li>To call a class method on an object, we use the dot notation, specifying the object and the method, separated by a fullstop (<span class="fw">threeFourObj.print()</span> in the picture). The argument list does not contain an argument for the first (<span class="fw">self</span>) parameter, because the object preceding the fullstop is in fact the first argument.</li>
			    </ul>
			    <figure id="py-obj-from-cls" class="my1">
				<figcaption>Creating an object of a defined class</figcaption><pre class="code-listing">
threeFourObj = ThreeFour()
threeFourObj.print()
print(threeFourObj.x)
threeFourObj.y = 44
print(threeFourObj.y)</pre>
				<table class="legend">    
				    <tr><td><span class="fw">threeFourObj = ThreeFour()</span></td><td>An object of type <span class="fw">ThreeFour</span> is created and assigned to variable <span class="fw">threeFourObj</span>.</td></tr>
				    <tr><td><span class="fw">threeFourObj.print()</span></td><td>Dot-notation is used to run the method <span class="fw">print</span> of class <span class="fw">ThreeFour</span> on object <span class="fw">threeFourObj</span>.</td></tr>
				    <tr><td><span class="fw">print(threeFourObj.x)</span></td><td>Uses dot-notation to read member variable <span class="fw">x</span></td></tr>
				    <tr><td><span class="fw">threeFourObj.y = 44</span></td><td>Uses dot-notation to access member variable <span class="fw">y</span> for writing</td></tr>
				</table>
				<hr><hr>
			    </figure>

			</article>
		    </li>

		    
		    <!--------------------------------------------------------------------->
		    <li id="ARTCLID000098">
			<p>Method parameters</p>
			<article style="display:none">
			    <h2>Method parameters</h2>

			    <p>Let's look at class with methods that have parameters other than the first one (i.e. other than <span class="fw">self</span>)</p>
			    <figure id="py-constructor-params">
				<figcaption>Parameters</figcaption><pre class="code-listing">class TwoNumbers:
    def __init__(self, num1, num2):
        self.num1 = num1
        self.num2 = num2

    def print(self, heading=""):
        print("")
        if heading != "":
            print("----- {} -----".format(heading))
        print("num1 is: ", self.num1)
        print("num2 is: ", self.num2)


twoNumObj = TwoNumbers(3, 4)
twoNumObj.print()
twoNumObj.print("THE TWO NUMBERS")</pre>
				<table class="legend">
				    <colgroup width="40%"/>
				    <colgroup width="60%"/>
				    <tr><td><span class="fw">__init__(self, num1, num2)</span></td><td>The constructor includes two parameters other than <span class="fw">self</span>. These are used to initialise instance member variables <span class="fw">self.num1</span> and <span class="fw">self.num2</span>.</td></tr>
				    <tr><td><span class="fw">print(self, heading="")</span></td><td>The <span class="fw">print</span> method includes one parameter other than <span class="fw">self</span>. This is used to pass in the heading text and has the empty string as its default value.</td></tr>
				    <tr><td><span class="fw">twoNumObj = TwoNumbers(3, 4)</span></td><td>The object is constructed with arguments <span class="fw">3</span> and <span class="fw">4</span>. The value of <span class="fw">self</span> does not need to be passed in in any way (it does not exist before the construction call is made).</td></tr>
				    <tr><td><span class="fw">twoNumObj.print()</span></td><td>The <span class="fw">print</span> method is called without any arguments, indicating that the default value should be used for the <span class="fw">heading</span> parameter. The object <span class="fw">twoNumObj</span>, specified to the left of the fullstop is the first argument i.e. the value given for the <span class="fw">self</span> parameter i.e. the object on which the method is being called.</td></tr>
				    <tr><td><span class="fw">twoNumObj.print("THE TWO NUMBERS")</span></td><td>The <span class="fw">print</span> method is called with the "THE TWO NUMBERS" argument. This value is assigned to the second function parameter, <span class="fw">heading</span>. As above, the value given for the <span class="fw">self</span> parameter of the function is the object <span class="fw">twoNumObj</span>.</td></tr>
				</table>
				<hr><hr>
			    </figure>
			</article>
		    </li>


		    <!--------------------------------------------------------------------->            
		    <li id="ARTCLID000099">
			<p>More about member variables</p>
			<article style="display:none">
			    <h2>More about member variables</h2>

			    <p>Member variables in Python are also called <strong>attributes</strong>.</p>

			    <h3 class="mt3">Instance vs. class member variables</h3>
			    
			    <p>We have already seen <strong>instance member variables</strong> in the previous examples:</p>
			    <ul>
				<li>each object has its own copy of this type of variable</li>
				<li>an instance variable must be defined in the constructor</li>
				<li>it is accessed via the object: <em>object_name</em>.<em>variable_name</em></li>
			    </ul>

			    <p>There are also <strong>class member variables</strong>:</p>
			    <ul>
				<li>there is only one copy of this kind of variable</li>
				<li>it is stored outside of the individual objects and shared by all objects of the class</li>
				<li>a class variable is defined in the body of the class definition</li>
				<li>it can be accessed in two ways:
				    <ul>
					<li>via the class: <em>class_name</em>.<em>variable_name</em></li>
					<li>via the object (but only if an instance member variable of the same name does not exist): <em>object_name</em>.<em>variable_name</em></li>
				    </ul>
				</li>
			    </ul>
			    <figure id="py-member-vars">
				<figcaption>Types of member variables</figcaption><pre class="code-listing">class TwoNumbersV2:
    heading = "THE TWO NUMBERS"

    def __init__(self, num1, num2):
        self.num1 = num1
        self.num2 = num2

    def print(self):
        print("")
        if self.heading != "":
            print("----- {} -----".format(self.heading))
        print("num1 is: ", self.num1)
        print("num2 is: ", self.num2)

twoNumObj = TwoNumbersV2(3, 4)
twoNumObj.print()	</pre>
				<table class="legend">
				    <tr><td><span class="fw">heading = "THE TWO NUMBERS"</span></td><td>A <strong>class member variable</strong> definition</td></tr>
				    <tr><td><span class="fw">self.num1 = num1<br>self.num2 = num2</span></td><td><strong>Instance member variable</strong> definitions</td></tr>
				</table>
				<hr/><hr/>
			    </figure>

			    <p>Let's have a look how access to class variables works.</p>
			    
			    <figure id="py-class-vs-inst-1">
				<figcaption>Class member variables</figcaption><pre class="code-listing">
class Simplissima:
    x = "a"


s1 = Simplissima()
s2 = Simplissima()

print(Simplissima.x)
print(s1.x)
print(s2.x)	</pre>
				<table class="legend">
				    <tr><td><span class="fw">Simplissima.x</span></td><td>Class variable access via class - recommended</td></tr>
				    <tr><td><span class="fw">s1.x</span></td><td>Class variable accessed via object</td></tr>
				</table>
				<hr/><hr/>
			    </figure>
			    What happens?<pre>
               class Simplissima: x = "a"
               --------------------------
                  print(Simplissima.x)

                       output: a
      
          object s1: no x      object s2: no x
          ---------------      ---------------
           print(s1.x)           print(s2.x)
      
         own x not defined    own x not defined
          so get class x       so get class x
      
             output: a            output: a
      			    </pre>

			    <p>Adding onto the code in <a class="xref" href="#py-class-vs-inst-1">?</a>:</p>
			    <figure id="py-class-vs-inst-2">
				<figcaption>Accessing class variables (continued)</figcaption><pre class="code-listing">
s1.x = "hello"
print(Simplissima.x)
print(s1.x)
print(s2.x)</pre>
				<table class="legend">
				    <tr><td><span class="fw">s1.x</span></td><td>An object variable called <span class="fw">x</span> is added. This will hide the class variable, regardless of whether it is added externally like above or internally via <span class="fw">self.x = "hello"</span> inside a method of the class.</td></tr>
				</table>
				<hr/><hr/>
			    </figure>
			    
			    What happens now?<pre>
               class Simplissima: x = "a"
               --------------------------
                  print(Simplissima.x)

                       output: a
      
       object s1: x = "hello"     object s2: no x
       ----------------------     ---------------
           print(s1.x)              print(s2.x)
      
           own x is set          own x not defined
          so print own x          so get class x
      
           output: hello             output: a</pre>

			    <details class="ice"><summary></summary>
				<p>Define a class that has a name and an id as instance member variables. The name should be passed into the constructor. The id should be unique and generated from a class member variable that stores the last id used.</p>
				<p>Define a <span class="fw">print</span> method for the class. It should print the id and the name of the object, with suitable headings.</p>
				<p>Create three objects of the class, then call the <span class="fw">print</span> method on each one of them.</p>
				<p><a href="res/files/python/classes/classvars.py">EXAMPLE SOLUTION</a></p>
			    </details>
			    
			    
			    <h3 class="mt3">Dynamically adding instance member variables</h3>
			    <p>Instance variables can be added to already created objects. We have seen this already in <a class="xref" href="#py-class-vs-inst-1">?</a>, where an instance (object-bound) variable <span class="fw">x</span> was created on the object <span class="fw">s1</span> after it was constructed. For most purposes this is not recommended as it breaks the original class definition. In this module, <strong>you should not be doing this</strong>, except in the following exercise.</p>

			    <details class="ice"><summary></summary>
				<p>Copy the following code into a Python script file. Run the script.</p><pre>

class Test:

    def __init__(self):
        self.x = 1

    def print(self):
        print("----- Test -----")
        print("x is: ", self.x)
        print("y is: ", self.y)
        
to = Test()

to.print()
				</pre>
				<p>An error is reported. What do you think happened? </p>
				
				<p>Now add the following line just before the print statement at the end of the file:</p><pre>

to.y = "hello"
				</pre>
			    </details>
			</article>
		    </li>

		    <!--------------------------------------------------------------------->            
		    <li id="ARTCLID000145">
			<p>Underscores in member names</p>
			<article style="display:none">
			    <h2>Underscores in member names</h2>

			    <p>Some programming languages have constructs that allow controlling access to variables and methods in classes. In Python all variables and methods in a class are accessible (public). However, there is a convention in naming them that indicates to class users what the intention of the class developer was with respect to variable and method levels of access.</p>
			    <figure id="py-access-convention">
				<figcaption>Naming convention for variables and methods</figcaption><pre class="code-listing">class MixedUp:
    def __init__(self)
        self.x = "a"     # public
        self._y = "b"    # private
        self.__z = "c"   # mangled</pre>
				<table class="legend">    
				    <tr><td><span class="fw">x</span> (name with no underscores)</td><td>A public variable or method, intended for access from anywhere</td></tr>
				    <tr><td><span class="fw">_y</span> (one leading underscore)</td><td>A private variable or method, not intended to be accessed with dot-notation on the object (i.e. from outside of the object)</td></tr>
				    <tr><td><span class="fw">__z</span> (two leading underscores)</td><td>A private variable or method, as above, but also 'mangled' (prefixed with class name) by the Python interpreter to make external use harder</td></tr>
				    <tr><td><span class="fw">__init__</span> (two leading and two trailing underscores)</td><td>These names are called <em>dunders</em> and denote Python-internal attributes and methods</td></tr>
				</table>
			    </figure>

			    <p>While nothing stops developers from not complying with the convention, doing this could be considered 'hacking', as it means not using someone else's code in the way it was intended.</p>	
			</article>
		    </li>
		    

		    <!--------------------------------------------------------------------->            
		    <li id="ARTCLID000100">
			<p>Classes as variable types</p>
			<article style="display:none">
			    <h2>Classes as variable types</h2>

			    <h3 class="mt3">Immutable and mutable objects</h3>
			    
			    <p>We have already seen that <strong>all values assignable to variables in Python are objects</strong> and that these objects can be <strong>immutable or mutable</strong>.</p>
			    <ul>
				<li>When dealing with <strong>mutable objects</strong> it is important to remember that
				    <ul>
					<li>variables are <strong>a kind of pointer to the actual value</strong> of the object (they do not contain the object)</li>
					<li>assigning one variable to another simply creates another such pointer to the same object</li>
				    </ul>
				    <p>Examples: lists, <span class="underline">objects created from developer-defined classes</span></p>
				</li>
				<li>When dealing with <strong>immutable objects</strong> the representation of the object is not of interest but only its value.
				    <p>Examples: integers, booleans, strings, tuples</p>
				</li>
			    </ul>
			    <figure>
				<figcaption>Variables referring to mutable and immutable objects</figcaption>
				<img class="w-four" src="res/images/mut_immut.png">
			    </figure>

			    <h3 class="mt3">Global and local variables</h3>

			    <p>We have seen that there are global and local variables, as well as class and instance member variables. Any of these can 'contain' (i.e. refer to) an object of a developer-defined class.</p>

			    <p>We have seen multiple examples of <strong>global</strong> variables being assigned a class instance object e.g. <span class="fw">s1</span> and <span class="fw">s2</span> in <a class="xref" href="#py-class-vs-inst-1">?</a>.</p>

			    <p>The following example shows a <strong>local</strong> variable (<span class="fw">address</span>) holding an object of type <span class="fw">Address</span>).</p>
			    
			    <figure id="py-gln-object-var">
				<figcaption>Local variable holding object</figcaption><pre class="code-listing">class Address:
    def __init__(self, n, s, t):
        self.number = n
        self.street = s
        self.town = t

    def print(self):
        print("Address: {} {}, {}".format(self.number, self.street, self.town))

def get_a_sample_address(town):

    address = Address(1, "Main Street", town)
    return address

get_a_sample_address("Sometown").print()</pre>
				
			    </figure>

			    <h3 class="mt3">Member variables</h3>
			    
			    <p>A <strong>member</strong> variable is no different from any other variable in the way it refers to an object. The following example uses the class Address from <a class="xref" href="#py-gln-object-var">?</a>. Here the class <span class="fw">Person</span> includes a member variable called <span class="fw">address</span> of type <span class="fw">Address</span>.</p>
			    
			    <figure id="py-class-as-member">
				<figcaption>A class as the type of a member variable value</figcaption><pre class="code-listing">class Person:
    def __init__(self, n, s, a):
        self.name = n
        self.surname = s
        self.address = a</pre>
			    </figure>

			    <details class="ice"><summary></summary>
				<p>Copy the definition of class <span class="fw">Address</span> from <a class="xref" href="#py-gln-object-var">?</a> and the definition of class <span class="fw">Person</span> from <a class="xref" href="#py-class-as-member">?</a> into a Python script. Add the method <span class="fw">print</span> to the class <span class="fw">Person</span> and implement it so that it prints the name and the surname, with a heading, on one line, and prints the address, using the existing method of the <span class="fw">Address</span> class, in another line. In the script, also define a variable of type <span class="fw">Person</span>, then call the print method to print it.</p>

				<p><a href="res/files/python/classes/objmemvars.py">EXAMPLE SOLUTION</a></p>
			    </details>

			    <details class="ice"><summary></summary>
				<p>In this exercise we will test the "pointer" nature of variables, which is important to keep in mind when programming in Python.</p>
				<p>Copy the <span class="fw">Address</span> and <span class="fw">Person</span> classes used before into a new Python script.</p>
				<p>To class <span class="fw">Person</span>, add a method called <span class="fw">move</span>. This method should increase the number in the address by 1.</p>
				<p>Create a new address object. Now use the <span class="fw">Person</span> class to create two people living at that address, by passing in the already created address object to both constructors. Call <span class="fw">print</span> on each of the <span class="fw">Person</span> objects.</p>
				<p>Next, call <span class="fw">move</span> on one of the <span class="fw">Person</span> objects and again call print on each of the <span class="fw">Person</span> objects.</p>
				<p>What happened? Explain why. What kind of scenario does this behaviour match? </p>
				<p><a href="res/files/python/classes/objmemvarsmod.py">EXAMPLE SOLUTION</a></p>

				<p>How would the code need to be modified to match the alternative reasonable scenario?</p>
				<p><a href="res/files/python/classes/objmemvarsmod2.py">EXAMPLE SOLUTION</a></p>
			    </details>

			    <h3 class="mt3">Objects in collections</h3>

			    <p>Objects of any type can be in collections such as lists. If a member of a collection is an object of a class, it is (as usual) in fact a 'pointer' to that object.</p>
			    <p>A list <strong>shallow copy</strong> will copy these pointers to the new list. A list <strong>deep copy</strong> will also create <strong>copies of the objects</strong> for the new list.</p>

			    <details class="ice"><summary></summary>
				<p>Using the class <span class="fw">Person</span> defined earlier, create three persons in a list. Make one shallow and one deep copy of the list. Write a function to print person lists, then use it to print out the three lists.</p>
				<p>Now make a modification to one of the objects in the original list. Print out the three lists again and analyse the result.</p>

				<p>Finally, replace a different object in the original list with a new <span class="fw">Person</span> object. Print out the three lists again and analyse the result.</p>
				
				<p><a href="res/files/python/classes/objlstcp.py">EXAMPLE SOLUTION</a></p>
			    </details>

			</article>
		    </li>
		    
		    
		</ol>
	    </article>

	    
	    <p id="sig">Jelena VasiÄ‡</p>
	</div>


	
	<script type="text/javascript" src="../common/res/scripts/main.js"></script>
	<script type="text/javascript" src="../common/res/scripts/modules/xrefs.js"></script>
	<script type="text/javascript" src="res/scripts/xrefs.js"></script>
    </body>
</html>
